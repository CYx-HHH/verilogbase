## IIC基础知识及和SPI比较
  IIC（Inter Intergrated Circuit），集成电路总线。PHLIPS公司开发的两线式串行总线，用于连接微控制器及其外围设备。由数据线SDA和时钟SCL构成的串行总线，可发送和接收数据。
  
*IIC组成*：    
  - Serial Data，串行数据线。
  - Serial CLK，串行时钟线。  

*IIC特点*： 同步通信（UART异步通信）；有应答机制，通信更安全。
  
    IIC是半双工，而不是全双工。
    IIC总线多主多从。
    IIC速度：标准100Kbps，快速400Kbps，高速3.4Mbps。
    
    适用于微控制器，MCU，PLC，CPV，FPGA，RAM/ROM，EEPROM。
    
**IIC开漏输出**，引脚不会输出高电平。
**有上拉电阻**，给数据线提供高电平状态。

*mos管导通输出低电平；mos管关闭，由上拉电阻输出高电平。* 

主要应用于线上电流很大，对器件冲击大的场景，开漏结构可以承受更大电流。

    
    SPI高速全双工，可以跑100Mhz，主要应用于Flash。有半双工通信，只有一根线，应用在ADC、DAC芯片上。一主多从模式，主机初始化帧。没有应答机制，无法检测误码。
  
## Flash和EEPROM比较
  Flash，有SPI接口，也有IIC接口。写数据以扇区为单位擦除，flash适用于大批量读写。

  EEprom，掉电不丢失。有SPI接口，也有IIC接口。可擦写100w次。随机存储，非常灵活，适用于频繁擦除需求。

## IIC协议组成，串行数据线SDA和时钟线SCL(100Kbps)
  设备空闲状态：高电平，**高电平可以检测设备的好坏**
  
  起始位：时钟为高电平，数据线拉低
  
  停止位：时钟线为高电平，数据线拉高
  
  数据输出：低电平改变状态
  
  应答：0有效应答，1无效应答

## AT24C64芯片
  AT24C32D容量为32Kb，AT24C64D容量为64Kb。一页有32byte组成。

  芯片架构：开始启动逻辑、串行控制逻辑、设备地址比较、数据地址/计数器。


## 其他
  - 时钟要尽可能干净简洁，时钟使用其他信号会有影响。
  - 三态门编写，用？：实现。
      
        1'dz 高阻态，把数据线释放掉。
        1'dx 不定态/悬浮态，不确定的状态。 
        
  - 原语查询，vivado语言模板里查找。IOBUF原语实现三态门，不方便跨平台移植。

  - 检测应答，实现只给了写设备地址检测应答，后面没有检测。


